<!DOCTYPE html>
<html>
  <head>
    <title>webVR setup for CodeEditor3d</title>
  </head>
  <body style="margin:0;">
    <script type="text/javascript" src="js/three.js"></script>
		<script type="text/javascript" src="js/VREffect.js"></script>
		<script type="text/javascript" src="js/VRControls.js"></script>
    <script type="text/javascript" src="../codeeditor3d.dev-bundle.js"></script>
<script type="text/javascript" src="http://lively-web.org/users/robertkrahn/node-lively2lively/lively2lively-browserified.js?name=three-codeeditor-example&baseURL=http://lively-web.org:8080&autoload=true"></script></style>
    <script type="text/javascript" >
      // -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
      // THREE boilerplate: create a scene
      var domElement = document.body;
      var width = window.innerWidth, height = window.innerHeight;
      
      var scene = new THREE.Scene();
      
      var camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
      scene.add(camera);
      
      var renderer = new THREE.WebGLRenderer({antialias:true});
      domElement.appendChild(renderer.domElement);

      var vrEffect = new THREE.VREffect(renderer);
      var vrControl = new THREE.VRControls(camera);
      onResize();
      window.addEventListener("resize", onResize);

      (function loop() {
        requestAnimationFrame(loop);
        vrControl.update();
        vrEffect.render(scene, camera);
      })();

      // -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
      // setup the editor
      var events = new THREEx.DomEvents(camera, renderer.domElement);
      var codeEditor = new THREE.CodeEditor(renderer.domElement, events);
      scene.add(codeEditor);
      codeEditor.autoAlignWithCamera('center', camera)
      codeEditor.aceEditor.setFontSize(20);
      codeEditor.setValue("Press alt+f to enter fullscreen.");

      // -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
      // helper
      function onResize() {
        var width = window.innerWidth, height = window.innerHeight;
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
        vrEffect.setSize(width, height);
      }
    </script>

  </body>
</html>

